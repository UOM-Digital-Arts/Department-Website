<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/about.css" />

  <script src="./js/script.js" defer></script>

  <!-- Icon -->
  <link rel="icon" href="images/icon.png" />

  <!-- Page title -->
  <title>ABOUT US</title>
</head>

<body>
  <header class="header" id="header">

    <!-- Logo -->
    <a href="./index.html">
      <img src="./images/icon.png" id="logo" alt="logo" />
    </a>

    <!-- Mobile Hamburger -->
    <input class="side-menu" type="checkbox" id="side-menu" onclick="showMobileNav()" />
    <label class="hamb" for="side-menu"><span class="hamb-line"></span></label>

    <!-- Mobile Navbar -->
    <nav style="display: none" id="nav-mobile">
      <ul>
        <!-- <li><a href="./index.html">HOME</a></li> -->
        <li><a href="./about.html">ABOUT US</a></li>
        <li><a href="./projects.html">PROJECTS</a></li>
        <li><a href="./sponsors.html">SPONSORS</a></li>
        <li><a href="https://issuu.com/sintesi-bfa2023/docs/sintesi-catalogue" target="_blank">CATALOGUE</a></li>
        <li><a href="./virtualexpo.html">VIRTUAL EXPO</a></li>
      </ul>
    </nav>

    <!-- Desktop Navbar -->
    <ul id="nav-desktop">
      <!-- <li><a href="./index.html">HOME</a></li> -->
      <li class="current"><a href="./about.html">ABOUT US</a></li>
      <li><a href="./projects.html">PROJECTS</a></li>
      <li><a href="./sponsors.html">SPONSORS</a></li>
      <li><a href="https://issuu.com/sintesi-bfa2023/docs/sintesi-catalogue" target="_blank">CATALOGUE</a></li>
      <li><a href="./virtualexpo.html">VIRTUAL EXPO</a></li>
    </ul>

  </header>

  <!-- About content -->
  <div id="about">
    <div id="aboutcontainer">
      <span class="left">
        <img src="./images/Group.jpg" alt="group" />
      </span>
      <span class="right">
        <p>Sintesi is an exhibition showcasing the culmination of the BFA in Digital Arts course at the University of
          Malta
        </p><br>

        <p>The term Sintesi reflects the process of combining elements to synthesise art and express complex concepts.
          The exhibition celebrates the diverse artistic abilities of the students, showcasing projects in virtual
          reality, mixed media,
          photography, graphic design, illustration, and animation.</p>



        <div id="scroll-down">
          <img id="downarrow" src="./images/scroll-down.png" onclick="scrollToContent()">
        </div>
      </span>
    </div>
  </div>

  <div id="content">
    <div id="carouselsection">
      <div class="carousel">
        <div class="carousel-container">
          <!-- <div class="carousel-slide">
            <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 1">
          </div>
          <div class="carousel-slide">
            <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 2">
          </div>
          <div class="carousel-slide">
            <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 3">
          </div> -->
        </div>

        <a class="carousel-prev"><img class="carouselleft" src="./images/scroll-down.png"></a>
        <a class="carousel-next"><img class="carouselright" src="./images/scroll-down.png"></a>

        <div class="carousel-indicators">
          <!-- <span class="indicator active"></span>
          <span class="indicator"></span>
          <span class="indicator"></span> -->
        </div>
      </div>
    </div>
  </div>


  <div id="social">
    <div id="iconcontainer">
      <a class="sociallink" href="https://www.facebook.com/profile.php?id=100090701443203" target="_blank">
        <svg class="fb" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32px" fill="#FFFFFF">
          <path
            d="M12 2.03998C6.5 2.03998 2 6.52998 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.84998C10.44 7.33998 11.93 5.95998 14.22 5.95998C15.31 5.95998 16.45 6.14998 16.45 6.14998V8.61998H15.19C13.95 8.61998 13.56 9.38998 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96C15.9164 21.5878 18.0622 20.3855 19.6099 18.57C21.1576 16.7546 22.0054 14.4456 22 12.06C22 6.52998 17.5 2.03998 12 2.03998Z" />
        </svg>
      </a>

      <a class="sociallink" href="https://instagram.com/sintesi_bfa" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" fill="#FFFFFF">
          <path
            d="M16.98 0a6.9 6.9 0 0 1 5.08 1.98A6.94 6.94 0 0 1 24 7.02v9.96c0 2.08-.68 3.87-1.98 5.13A7.14 7.14 0 0 1 16.94 24H7.06a7.06 7.06 0 0 1-5.03-1.89A6.96 6.96 0 0 1 0 16.94V7.02C0 2.8 2.8 0 7.02 0h9.96zm.05 2.23H7.06c-1.45 0-2.7.43-3.53 1.25a4.82 4.82 0 0 0-1.3 3.54v9.92c0 1.5.43 2.7 1.3 3.58a5 5 0 0 0 3.53 1.25h9.88a5 5 0 0 0 3.53-1.25 4.73 4.73 0 0 0 1.4-3.54V7.02a5 5 0 0 0-1.3-3.49 4.82 4.82 0 0 0-3.54-1.3zM12 5.76c3.39 0 6.2 2.8 6.2 6.2a6.2 6.2 0 0 1-12.4 0 6.2 6.2 0 0 1 6.2-6.2zm0 2.22a3.99 3.99 0 0 0-3.97 3.97A3.99 3.99 0 0 0 12 15.92a3.99 3.99 0 0 0 3.97-3.97A3.99 3.99 0 0 0 12 7.98zm6.44-3.77a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8z" />
        </svg>
      </a>
    </div>
  </div>

  <div id="lightbox">
    <img id="lightbox-image" src="./images/yellowportait.png">
  </div>
</body>

<script>
  let html = document.getElementsByTagName("html")[0];

  // scrolldown turns yellow on hover
  let downarrow = document.getElementById("downarrow");
  let carousellefts = document.getElementsByClassName("carouselleft");
  let carouselrights = document.getElementsByClassName("carouselright");

  downarrow.addEventListener("mouseover", function () {
    downarrow.src = "./images/scroll-down-yellow.png";
  });

  downarrow.addEventListener("mouseout", function () {
    downarrow.src = "./images/scroll-down.png";
  });

  // carouselleft.addEventListener("mouseover", function () {
  //   carouselleft.src = "./images/scroll-down-yellow.png";
  // });

  // carouselleft.addEventListener("mouseout", function () {
  //   carouselleft.src = "./images/scroll-down.png";
  // });
  for (let i = 0; i < carousellefts.length; i++) {
    carousellefts[i].addEventListener("mouseover", function () {
      carousellefts[i].src = "./images/scroll-down-yellow.png";
    });

    carousellefts[i].addEventListener("mouseout", function () {
      carousellefts[i].src = "./images/scroll-down.png";
    });
  }

  // carouselright.addEventListener("mouseover", function () {
  //   carouselright.src = "./images/scroll-down-yellow.png";
  // });

  // carouselright.addEventListener("mouseout", function () {
  //   carouselright.src = "./images/scroll-down.png";
  // });

  for (let i = 0; i < carouselrights.length; i++) {
    carouselrights[i].addEventListener("mouseover", function () {
      carouselrights[i].src = "./images/scroll-down-yellow.png";
    });

    carouselrights[i].addEventListener("mouseout", function () {
      carouselrights[i].src = "./images/scroll-down.png";
    });
  }

  function showObject() {
      let do_carousel = true;
      let carousel_qty = 35;

      let template = document.getElementById('carouselsection');
      template.style.display = "flex";

      if (do_carousel) {
        // set carousel images if present
        let carousel_container = document.querySelectorAll(".carousel-container");
        let carousel_indicators = document.querySelectorAll(".carousel-indicators");

        // Convert NodeList to array
        carousel_container = Array.from(carousel_container);
        carousel_indicators = Array.from(carousel_indicators);

        // create array of images from project.images/carousel
        let carousel_images = [];
        for (let i = 1; i <= carousel_qty; i++) {
          carousel_images.push("./images/about/" + i + ".jpg");
        }

        console.log(carousel_container);
        console.log(carousel_images);

        // clear container contents
        carousel_container.forEach(function (container) {
          container.innerHTML = '';
        });

        // set carousel images
        carousel_images.forEach(function (image, index) {
          carousel_container.forEach(function (container) {
            container.innerHTML += ' \
      <div class="carousel-slide"> \
        <img src="' + image + '" alt="Image ' + index + '"> \
      </div> \
    ';
          });
        });

        console.log(carousel_container);

        // clear indicator contents
        carousel_indicators.forEach(function (indicator) {
          indicator.innerHTML = '';
        });

        // set carousel indicators
        carousel_images.forEach(function (image, index) {
          carousel_indicators.forEach(function (indicator_container) {
            indicator_container.innerHTML += ' \
      <span class="indicator"></span> \
    ';
          });
        });

        console.log(carousel_indicators);

        // set first image to active
        let carousel_slides = document.querySelectorAll(".carousel-slide");
        console.log(carousel_slides);

        if (carousel_slides) {
          carousel_slides[0].classList.add("active");


          // set carousel indicator active
          let indicators = document.querySelectorAll(".indicator");
          console.log(indicators);

          indicators[0].classList.add("active");

          activateCarousel();
        }
      }


      // Close fullscreen when press esc unless lightbox is 
      document.addEventListener("keydown", function (event) {
        if (event.keyCode == 27 && lightbox.style.display == "none") {
          fadeOutFullscreen();
        }
      });

      let lightbox = document.getElementById("lightbox");
      let lightbox_image = document.getElementById("lightbox-image");

      // add lightbox to carousel images
      let carousel_images_lightbox = document.querySelectorAll(".carousel-slide img");
      console.log(carousel_images_lightbox)

      for (let i = 0; i < carousel_images_lightbox.length; i++) {
        console.log(carousel_images_lightbox[i])
        carousel_images_lightbox[i].onclick = function () {
          lightbox.style.display = "flex";
          lightbox_image.src = "./images/about/" + (i + 1) + ".jpg";

          console.log(lightbox)
          console.log(lightbox.style.display)
        }

        console.log(carousel_images_lightbox)
      }


      // close lightbox on click outside lightbox or press esc
      document.getElementById("lightbox").onclick = function () {
        document.getElementById("lightbox").style.display = "none";
      }

      document.onkeydown = function (evt) {
        evt = evt || window.event;
        if (evt.keyCode == 27) {
          setTimeout(function () {
            document.getElementById("lightbox").style.display = "none";
          }, 10);
        }
      };
  }

  function hideObject() {
    fullscreen.style.display = "none";
  }

  function scrollToContent() {
    let content = document.getElementById("content");
    // get first child which is not display none
    let children = content.children;
    for (let i = 0; i < children.length; i++) {
      if (children[i].style.display != "none") {
        content = children[i];
        break;
      }
    }

    content = content.firstElementChild;

    content.scrollIntoView({
      behavior: 'smooth',
      block: 'start'
    });
  }

  function fadeOutFullscreen() {
    // stop playback of all youtube videos
    let videos = document.querySelectorAll("iframe");
    videos.forEach(function (video) {
      let src = video.src;
      video.src = src;
    });

    fullscreen.animate({
      opacity: 0
    }, 400, function () {
      $(document).css("display", "none");
    });

    setTimeout(function () {
      fullscreen.style.display = "none";
      fullscreen.style.overflowY = "hidden";
      html.style.overflowY = "auto";
    }, 300);

  }

  document.onkeydown = function (evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27 || evt.keyCode == 8) {
      fadeOutFullscreen()
    }
  };

  let description = document.getElementById("objdescription");
  function collapse() {
    // Extended
    if (description.style.width) {
      description.style.width = null;

      // Collapsed
    } else {
      description.style.width = "25%";
    }
  }

  showObject();

  function activateCarousel() {
    const carousel = document.querySelector('.carousel');
    const carouselSlides = document.querySelectorAll('.carousel-slide');
    const carouselPrev = document.querySelector('.carousel-prev');
    const carouselNext = document.querySelector('.carousel-next');
    const carouselIndicators = document.querySelectorAll('.indicator');

    let slideIndex = 0;

    // Show the initial slide and set the active indicator
    showSlide(slideIndex);
    setActiveIndicator(slideIndex);

    // Move to the previous slide
    carouselPrev.addEventListener('click', () => {
      slideIndex--;
      if (slideIndex < 0) {
        slideIndex = carouselSlides.length - 1;
      }
      showSlide(slideIndex);
      setActiveIndicator(slideIndex);
    });

    // Move to the next slide
    carouselNext.addEventListener('click', () => {
      slideIndex++;
      if (slideIndex >= carouselSlides.length) {
        slideIndex = 0;
      }
      showSlide(slideIndex);
      setActiveIndicator(slideIndex);
    });

    // Move to the selected slide when an indicator is clicked
    carouselIndicators.forEach((indicator, index) => {
      indicator.addEventListener('click', () => {
        slideIndex = index;
        showSlide(slideIndex);
        setActiveIndicator(slideIndex);
      });
    });

    // Show the specified slide
    function showSlide(index) {
      const numSlides = carouselSlides.length;

      // Adjust the index to wrap around if it goes out of bounds
      if (index < 0) {
        index = numSlides - 1;
      } else if (index >= numSlides) {
        index = 0;
      }

      // Set the transform property to move the carousel container
      carousel.querySelector('.carousel-container').style.transform = `translateX(-${index * 100}%)`;

      // Update the slideIndex variable
      slideIndex = index;
    }


    // Set the active indicator
    function setActiveIndicator(index) {
      carouselIndicators.forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add('active');
        } else {
          indicator.classList.remove('active');
        }
      });

      carouselSlides.forEach((slide, i) => {
        if (i === index) {
          slide.classList.add('active');
        } else {
          slide.classList.remove('active');
        }
      });
    }
  }


</script>

</html>