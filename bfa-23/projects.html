<!DOCTYPE html>
<html lang="en">

<head>
  <script src="script.js"></script>
  <script src="jquery-3.6.3.js"></script>

  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/projects.css" />

  <script src="./js/script.js" defer></script>


  <!-- Icon -->
  <link rel="icon" href="images/icon.png" />

  <!-- Page title -->
  <title>PROJECTS</title>
</head>

<body>
  <header class="header" id="header">

    <!-- Logo -->
    <a href="./index.html">
      <img src="./images/icon.png" id="logo" alt="logo" />
    </a>

    <!-- Mobile Hamburger -->
    <input class="side-menu" type="checkbox" id="side-menu" onclick="showMobileNav()" />
    <label class="hamb" for="side-menu"><span class="hamb-line"></span></label>

    <!-- Mobile Navbar -->
    <nav style="display: none" id="nav-mobile">
      <ul>
        <!-- <li><a href="./index.html">HOME</a></li> -->
        <li><a href="./about.html">ABOUT US</a></li>
        <li><a href="./projects.html">PROJECTS</a></li>
        <li><a href="./sponsors.html">SPONSORS</a></li>
        <li><a href="https://issuu.com/sintesi-bfa2023/docs/sintesi-catalogue" target="_blank">CATALOGUE</a></li>
        <li><a href="#">VIRTUAL EXPO</a></li>
      </ul>
    </nav>

    <!-- Desktop Navbar -->
    <ul id="nav-desktop">
      <!-- <li><a href="./index.html">HOME</a></li> -->
      <li><a href="./about.html">ABOUT US</a></li>
      <li class="current"><a href="./projects.html">PROJECTS</a></li>
      <li><a href="./sponsors.html">SPONSORS</a></li>
      <li><a href="https://issuu.com/sintesi-bfa2023/docs/sintesi-catalogue" target="_blank">CATALOGUE</a></li>
      <li><a href="#">VIRTUAL EXPO</a></li>
    </ul>

  </header>

  <!-- Projects grid (desktop) - two projects per row -->
  <div id="grid-container-desktop">
  </div>


  <!-- Projects grid (mobile) - no rows here as projects take up the entire width -->
  <div id="grid-container-mobile">
  </div>

  <div id="fullscreenviewer">
    <div id="closebutton" onclick="fadeOutFullscreen()">
      <img id="backarrow" src="./images/scroll-down.png">
    </div>

    <div id="projectfullscreen">
      <div id="fullscreen-landing">
        <div id="author-name">
          <p>ANTHEA</p>
        </div>
        <div id="main-image">
          <img id="main-image-img" src="./images/4E8A2775-Edit_sm.jpg">
        </div>
        <div id="main-info">
          <div id="project-title">
          </div>

          <div id="project-description">
          </div>

          <div id="scroll-down">
            <img id="downarrow" src="./images/scroll-down.png" onclick="scrollToContent()">
          </div>
        </div>
      </div>

      <div id="content">
        <div id="template1" class="template">
          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>

          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>
        </div>

        <div id="template2" class="template">
          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a5">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a6">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a7">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a8">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>
        </div>

        <div id="template2c" class="template">
          <div class="carousel">
            <div class="carousel-container">
              <!-- <div class="carousel-slide">
                <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 1">
              </div>
              <div class="carousel-slide">
                <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 2">
              </div>
              <div class="carousel-slide">
                <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 3">
              </div> -->
            </div>

            <a class="carousel-prev"><img class="carouselleft" src="./images/scroll-down.png"></a>
            <a class="carousel-next"><img class="carouselright" src="./images/scroll-down.png"></a>

            <div class="carousel-indicators">
              <!-- <span class="indicator active"></span>
              <span class="indicator"></span>
              <span class="indicator"></span> -->
            </div>
          </div>


          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a5">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a6">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a7">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a8">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>

          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a5">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a6">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a7">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a8">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>
        </div>

        <div id="template3" class="template">
          <div class="video">
            <div class="grid-item-video">
              <iframe width="1280" height="720" src="https://www.youtube.com/embed/u31qwQUeGuM"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>
        </div>

        <div id="template4" class="template">
          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>

          <div class="video">
            <div class="grid-item-video">
              <iframe width="1280" height="720" src="https://www.youtube.com/embed/u31qwQUeGuM"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
            </div>
          </div>
        </div>

        <div id="template5" class="template">
          <div class="video">
            <div class="grid-item-video">
              <iframe width="1280" height="720" src="https://www.youtube.com/embed/u31qwQUeGuM"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="carousel">
            <div class="carousel-container">
              <!-- <div class="carousel-slide">
              <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 1">
            </div>
            <div class="carousel-slide">
              <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 2">
            </div>
            <div class="carousel-slide">
              <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 3">
            </div> -->
            </div>

            <a class="carousel-prev"><img class="carouselleft" src="./images/scroll-down.png"></a>
            <a class="carousel-next"><img class="carouselright" src="./images/scroll-down.png"></a>

            <div class="carousel-indicators">
              <!-- <span class="indicator active"></span>
            <span class="indicator"></span>
            <span class="indicator"></span> -->
            </div>
          </div>
        </div>

        <div id="template6" class="template">
          <div class="carousel">
            <div class="carousel-container">
              <!-- <div class="carousel-slide">
                <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 1">
              </div>
              <div class="carousel-slide">
                <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 2">
              </div>
              <div class="carousel-slide">
                <img src="images\IMG_9312-3 copy_sm.jpg" alt="Image 3">
              </div> -->
            </div>

            <a class="carousel-prev"><img class="carouselleft" src="./images/scroll-down.png"></a>
            <a class="carousel-next"><img class="carouselright" src="./images/scroll-down.png"></a>

            <div class="carousel-indicators">
              <!-- <span class="indicator active"></span>
              <span class="indicator"></span>
              <span class="indicator"></span> -->
            </div>
          </div>
        </div>

        <div id="template7" class="template">
          <div class="container">
            <div class="a1">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a2">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a3">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
            <div class="a4">
              <div class="grid-item-image">
                <img src="./images/yellowportait.png">
              </div>
            </div>
          </div>
        </div>

      </div>

      <div id="social">
        <div id="iconcontainer">
          <a id="facebook" class="sociallink" href="https://www.facebook.com/profile.php?id=100090701443203"
            target="_blank">
            <svg class="fb" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32px" fill="#FFFFFF">
              <path
                d="M12 2.03998C6.5 2.03998 2 6.52998 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.84998C10.44 7.33998 11.93 5.95998 14.22 5.95998C15.31 5.95998 16.45 6.14998 16.45 6.14998V8.61998H15.19C13.95 8.61998 13.56 9.38998 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96C15.9164 21.5878 18.0622 20.3855 19.6099 18.57C21.1576 16.7546 22.0054 14.4456 22 12.06C22 6.52998 17.5 2.03998 12 2.03998Z" />
            </svg>
          </a>

          <a id="instagram" class="sociallink" href="https://www.instagram.com/sintesi_bfa/" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" fill="#FFFFFF">
              <path
                d="M16.98 0a6.9 6.9 0 0 1 5.08 1.98A6.94 6.94 0 0 1 24 7.02v9.96c0 2.08-.68 3.87-1.98 5.13A7.14 7.14 0 0 1 16.94 24H7.06a7.06 7.06 0 0 1-5.03-1.89A6.96 6.96 0 0 1 0 16.94V7.02C0 2.8 2.8 0 7.02 0h9.96zm.05 2.23H7.06c-1.45 0-2.7.43-3.53 1.25a4.82 4.82 0 0 0-1.3 3.54v9.92c0 1.5.43 2.7 1.3 3.58a5 5 0 0 0 3.53 1.25h9.88a5 5 0 0 0 3.53-1.25 4.73 4.73 0 0 0 1.4-3.54V7.02a5 5 0 0 0-1.3-3.49 4.82 4.82 0 0 0-3.54-1.3zM12 5.76c3.39 0 6.2 2.8 6.2 6.2a6.2 6.2 0 0 1-12.4 0 6.2 6.2 0 0 1 6.2-6.2zm0 2.22a3.99 3.99 0 0 0-3.97 3.97A3.99 3.99 0 0 0 12 15.92a3.99 3.99 0 0 0 3.97-3.97A3.99 3.99 0 0 0 12 7.98zm6.44-3.77a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8z" />
            </svg>
          </a>

          <a id="behance" class="sociallink" href="#" target="_blank">
            <img src="./images/behance.png" style="width: 24px" alt="behance">
          </a>
        </div>
      </div>
    </div>
  </div>
  </div>
  <div id="lightbox">
    <img id="lightbox-image" src="./images/yellowportait.png">
  </div>
  </div>
</body>

<script>
  let fullscreen = document.getElementById("fullscreenviewer");
  let html = document.getElementsByTagName("html")[0];

  // scrolldown turns yellow on hover
  let backarrow = document.getElementById("backarrow");
  let downarrow = document.getElementById("downarrow");
  let carousellefts = document.getElementsByClassName("carouselleft");
  let carouselrights = document.getElementsByClassName("carouselright");

  backarrow.addEventListener("mouseover", function () {
    backarrow.src = "./images/scroll-down-yellow.png";
  });

  backarrow.addEventListener("mouseout", function () {
    backarrow.src = "./images/scroll-down.png";
  });

  downarrow.addEventListener("mouseover", function () {
    downarrow.src = "./images/scroll-down-yellow.png";
  });

  downarrow.addEventListener("mouseout", function () {
    downarrow.src = "./images/scroll-down.png";
  });

  // carouselleft.addEventListener("mouseover", function () {
  //   carouselleft.src = "./images/scroll-down-yellow.png";
  // });

  // carouselleft.addEventListener("mouseout", function () {
  //   carouselleft.src = "./images/scroll-down.png";
  // });
  for (let i = 0; i < carousellefts.length; i++) {
    carousellefts[i].addEventListener("mouseover", function () {
      carousellefts[i].src = "./images/scroll-down-yellow.png";
    });

    carousellefts[i].addEventListener("mouseout", function () {
      carousellefts[i].src = "./images/scroll-down.png";
    });
  }

  // carouselright.addEventListener("mouseover", function () {
  //   carouselright.src = "./images/scroll-down-yellow.png";
  // });

  // carouselright.addEventListener("mouseout", function () {
  //   carouselright.src = "./images/scroll-down.png";
  // });

  for (let i = 0; i < carouselrights.length; i++) {
    carouselrights[i].addEventListener("mouseover", function () {
      carouselrights[i].src = "./images/scroll-down-yellow.png";
    });

    carouselrights[i].addEventListener("mouseout", function () {
      carouselrights[i].src = "./images/scroll-down.png";
    });
  }

  function showObject(projectid) {
    let fullscreen = document.getElementById("fullscreenviewer");
    let author_name = document.getElementById("author-name");
    let image = document.getElementById("main-image-img");
    let project_title = document.getElementById("project-title");
    let project_description = document.getElementById("project-description");

    // reset fullscreen viewer scroll position
    setTimeout(function () {
      document.getElementById("projectfullscreen").scrollTop = 0;
    }, 10);


    $.getJSON("projects.json", function (data) {
      let projects = data.projects;
      console.log(projects);
      let project = projects.find(obj => obj.id == projectid);
      console.log(project);

      let do_carousel = false;
      let carousel_qty = 0;

      if (project.carousel_qty > 0) {
        do_carousel = true;
      }

      if (do_carousel) {
        carousel_qty = project.carousel_qty;
      }

      // change video iframe link
      let video = project.video;
      if (video) {
        // get all iframes
        let iframes = document.querySelectorAll("iframe");

        // set iframe src
        iframes.forEach(function (iframe) {
          console.log(iframe)
          iframe.src = video;
        });
      }

      project_template = "template" + project.template;
      console.log(project_template);

      document.getElementById("template1").style.display = "none";
      document.getElementById("template2").style.display = "none";
      document.getElementById("template2c").style.display = "none";
      document.getElementById("template3").style.display = "none";
      document.getElementById("template4").style.display = "none";
      document.getElementById("template5").style.display = "none";
      document.getElementById("template6").style.display = "none";
      document.getElementById("template7").style.display = "none";

      let template = document.getElementById(project_template);
      template.style.display = "flex";

      author_name.innerHTML = project.display_name;
      image.src = project.image;
      // if on mobile device (check ratio is smaller than 1:1)
      if (project.mobile_title && window.innerWidth / window.innerHeight < 1) {
        // add .showbr class to project_title
        project_title.classList.add("showbr");
        project_title.innerHTML = project.mobile_title;
      } else {
        project_title.classList.remove("showbr");
        project_title.innerHTML = project.title;
      }
      // project_title.innerHTML = project.title;
      project_description.innerHTML = project.description;

      // get all grid item images in grid-item-desktop within fullscreen
      let grid_item_images = document.querySelectorAll("#template" + project.template + " .grid-item-image img");
      console.log(grid_item_images)

      // set grid item images
      for (let i = 1; i <= grid_item_images.length; i++) {
        grid_item_images[i - 1].src = project.images + i + ".jpg";
      }

      if (do_carousel) {
        // set carousel images if present
        let carousel_container = document.querySelectorAll("#template" + project.template + " .carousel-container");
        let carousel_indicators = document.querySelectorAll("#template" + project.template + " .carousel-indicators");

        // Convert NodeList to array
        carousel_container = Array.from(carousel_container);
        carousel_indicators = Array.from(carousel_indicators);

        // create array of images from project.images/carousel
        let carousel_images = [];
        for (let i = 1; i <= carousel_qty; i++) {
          carousel_images.push(project.images + "carousel/" + i + ".jpg");
        }

        console.log(carousel_container);
        console.log(carousel_images);

        // clear container contents
        carousel_container.forEach(function (container) {
          container.innerHTML = '';
        });

        // set carousel images
        carousel_images.forEach(function (image, index) {
          carousel_container.forEach(function (container) {
            container.innerHTML += ' \
      <div class="carousel-slide"> \
        <img src="' + image + '" alt="Image ' + index + '"> \
      </div> \
    ';
          });
        });

        console.log(carousel_container);

        // clear indicator contents
        carousel_indicators.forEach(function (indicator) {
          indicator.innerHTML = '';
        });

        // set carousel indicators
        carousel_images.forEach(function (image, index) {
          carousel_indicators.forEach(function (indicator_container) {
            indicator_container.innerHTML += ' \
      <span class="indicator"></span> \
    ';
          });
        });

        console.log(carousel_indicators);

        // set first image to active
        let carousel_slides = document.querySelectorAll("#template" + project.template + " .carousel-slide");
        console.log(carousel_slides);

        if (carousel_slides) {
          carousel_slides[0].classList.add("active");


          // set carousel indicator active
          let indicators = document.querySelectorAll("#template" + project.template + " .indicator");
          console.log(indicators);

          indicators[0].classList.add("active");

          activateCarousel(project.template);
        }
      }


      // Close fullscreen when press esc unless lightbox is 
      document.addEventListener("keydown", function (event) {
        if (event.keyCode == 27 && lightbox.style.display == "none") {
          fadeOutFullscreen();
        }
      });

      let lightbox = document.getElementById("lightbox");
      let lightbox_image = document.getElementById("lightbox-image");

      console.log(grid_item_images)
      // open lightbox on click of images
      for (let i = 0; i < grid_item_images.length; i++) {
        console.log(grid_item_images[i])
        grid_item_images[i].onclick = function () {
          lightbox.style.display = "flex";
          lightbox_image.src = project.images + (i + 1) + ".jpg";

          // disable close button
          let closebutton = document.getElementById("closebutton");
          closebutton.style.opacity = 0;
          closebutton.style.pointerEvents = "none";

          console.log(lightbox)
          console.log(lightbox.style.display)
        }

        console.log(grid_item_images)
      }

      // add lightbox to carousel images
      let carousel_images_lightbox = document.querySelectorAll("#template" + project.template + " .carousel-slide img");
      console.log(carousel_images_lightbox)

      for (let i = 0; i < carousel_images_lightbox.length; i++) {
        console.log(carousel_images_lightbox[i])
        carousel_images_lightbox[i].onclick = function () {
          lightbox.style.display = "flex";
          lightbox_image.src = project.images + "carousel/" + (i + 1) + ".jpg";

          // disable close button
          let closebutton = document.getElementById("closebutton");
          closebutton.style.opacity = 0;
          closebutton.style.pointerEvents = "none";

          console.log(lightbox)
          console.log(lightbox.style.display)
        }

        console.log(carousel_images_lightbox)
      }


      // close lightbox on click outside lightbox or press esc
      document.getElementById("lightbox").onclick = function () {
        document.getElementById("lightbox").style.display = "none";
        // enable close button
        let closebutton = document.getElementById("closebutton");
        closebutton.style.opacity = 1;
        closebutton.style.pointerEvents = "auto";
      }

      document.onkeydown = function (evt) {
        evt = evt || window.event;
        if (evt.keyCode == 27) {
          setTimeout(function () {
            document.getElementById("lightbox").style.display = "none";
          }, 10);
        }
        // enable close button
        let closebutton = document.getElementById("closebutton");
        closebutton.style.opacity = 1;
        closebutton.style.pointerEvents = "auto";
      };

      // set social media icon links
      console.log(project.facebook)
      if (project.facebook) {
        document.getElementById("facebook").href = project.facebook;
      }
      else {
        document.getElementById("facebook").href = "https://www.facebook.com/profile.php?id=100090701443203"
      }

      if (project.instagram) {
        document.getElementById("instagram").href = project.instagram;
      }
      else {
        document.getElementById("instagram").href = "https://www.instagram.com/sintesi_bfa/"
      }

      if (project.behance) {
        document.getElementById("behance").href = project.behance;
        document.getElementById("behance").style.display = "block";
      }
      else {
        document.getElementById("behance").style.display = "none";
      }


      html.style.overflow = "hidden";
      fullscreen.style.display = "block";
      fullscreen.style.overflow = "scroll";
    });


  }

  function hideObject() {
    fullscreen.style.display = "none";
  }

  function scrollToContent() {
    let content = document.getElementById("content");
    // get first child which is not display none
    let children = content.children;
    for (let i = 0; i < children.length; i++) {
      if (children[i].style.display != "none") {
        content = children[i];
        break;
      }
    }

    content = content.firstElementChild;

    content.scrollIntoView({
      behavior: 'smooth',
      block: 'start'
    });
  }

  function fadeOutFullscreen() {
    // stop playback of all youtube videos
    let videos = document.querySelectorAll("iframe");
    videos.forEach(function (video) {
      let src = video.src;
      video.src = src;
    });

    fullscreen.animate({
      opacity: 0
    }, 400, function () {
      $(document).css("display", "none");
    });

    setTimeout(function () {
      fullscreen.style.display = "none";
      fullscreen.style.overflowY = "hidden";
      html.style.overflowY = "auto";
    }, 300);

  }

  document.onkeydown = function (evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27 || evt.keyCode == 8) {
      fadeOutFullscreen()
    }
  };

  let description = document.getElementById("objdescription");
  function collapse() {
    // Extended
    if (description.style.width) {
      description.style.width = null;

      // Collapsed
    } else {
      description.style.width = "25%";
    }
  }

  function loadGrid() {
    let grid = document.getElementById("grid-container-desktop");
    let grid_mobile = document.getElementById("grid-container-mobile");
    $.getJSON("projects.json", function (data) {
      let projects = data.projects;
      console.log(projects);
      console.log(grid);

      var i = 0;

      let content = "";

      projects.forEach(element => {
        console.log(element.author);
        console.log(i);
        if (i % 2 == 0) {
          content += '<div class="row">'
        }

        let short;
        if (element.mobile_short_title  && window.innerWidth / window.innerHeight < 1) {
          short = element.mobile_short_title;
        } else {
          short = element.short_title;
        }

        content += ' \
        <div class="grid-item"> \
          <div class="grid-item-image"> \
            <span class="grid-item-author" onclick="showObject(\'' + element.id + '\')"> \
              <p>' + element.display_name + '</p> \
            </span> \
            <img src="' + element.cover_image + '"> \
          </div> \
          <span class="grid-item-type"> \
            <p>' + element.type + '</p> \
          </span> \
          <span class="grid-item-title"> \
            <p>' + short + '</p> \
          </span> \
      </div> \
        '
        if (i % 2 != 0) {
          content += '</div>'
        }

        i++;
      });

      grid.innerHTML = content;
      grid_mobile.innerHTML = content;
    });
  }

  loadGrid();

  // ajax post parameters get
  var urlParams = new URLSearchParams(window.location.search);
  var projectid = urlParams.get('projectid');

  if (projectid) {
    showObject(projectid);
  }

  function activateCarousel(template) {
    const carousel = document.querySelector('#template' + template + ' .carousel');
    const carouselSlides = document.querySelectorAll('#template' + template + ' .carousel-slide');
    const carouselPrev = document.querySelector('#template' + template + ' .carousel-prev');
    const carouselNext = document.querySelector('#template' + template + ' .carousel-next');
    const carouselIndicators = document.querySelectorAll('#template' + template + ' .indicator');

    let slideIndex = 0;

    // Show the initial slide and set the active indicator
    showSlide(slideIndex);
    setActiveIndicator(slideIndex);

    // Move to the previous slide
    carouselPrev.addEventListener('click', () => {
      slideIndex--;
      if (slideIndex < 0) {
        slideIndex = carouselSlides.length - 1;
      }
      showSlide(slideIndex);
      setActiveIndicator(slideIndex);
    });

    // Move to the next slide
    carouselNext.addEventListener('click', () => {
      slideIndex++;
      if (slideIndex >= carouselSlides.length) {
        slideIndex = 0;
      }
      showSlide(slideIndex);
      setActiveIndicator(slideIndex);
    });

    // Move to the selected slide when an indicator is clicked
    carouselIndicators.forEach((indicator, index) => {
      indicator.addEventListener('click', () => {
        slideIndex = index;
        showSlide(slideIndex);
        setActiveIndicator(slideIndex);
      });
    });

    // Show the specified slide
    function showSlide(index) {
      const numSlides = carouselSlides.length;

      // Adjust the index to wrap around if it goes out of bounds
      if (index < 0) {
        index = numSlides - 1;
      } else if (index >= numSlides) {
        index = 0;
      }

      // Set the transform property to move the carousel container
      carousel.querySelector('.carousel-container').style.transform = `translateX(-${index * 100}%)`;

      // Update the slideIndex variable
      slideIndex = index;
    }


    // Set the active indicator
    function setActiveIndicator(index) {
      carouselIndicators.forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add('active');
        } else {
          indicator.classList.remove('active');
        }
      });

      carouselSlides.forEach((slide, i) => {
        if (i === index) {
          slide.classList.add('active');
        } else {
          slide.classList.remove('active');
        }
      });
    }
  }


</script>

</html>